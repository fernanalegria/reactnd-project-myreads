(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,o,t){e.exports=t(27)},22:function(e,o,t){},26:function(e,o,t){},27:function(e,o,t){"use strict";t.r(o);var A=t(0),n=t.n(A),a=t(15),r=t.n(a),c=t(12),l=t(4),s=t(5),i=t(7),u=t(6),g=t(8),h=t(13),C="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var K={Accept:"application/json",Authorization:v},b=function(e){return fetch("".concat(C,"/books/").concat(e),{headers:K}).then(function(e){return e.json()}).then(function(e){return e.book})},m=function(e,o){return fetch("".concat(C,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)({},K,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:o})}).then(function(e){return e.json()})},f=function(e){return fetch("".concat(C,"/search"),{method:"POST",headers:Object(h.a)({},K,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},k=(t(22),t(30)),E=t(28),d=function(e,o){var t;return function(){var A=this,n=arguments;clearTimeout(t),t=setTimeout(function(){return e.apply(A,n)},o)}},p=function(e){function o(){var e,t;Object(l.a)(this,o);for(var A=arguments.length,n=new Array(A),a=0;a<A;a++)n[a]=arguments[a];return(t=Object(i.a)(this,(e=Object(u.a)(o)).call.apply(e,[this].concat(n)))).state={query:""},t.handleChange=function(e){t.setState({query:e.target.value},function(){d(function(){t.props.search(t.state.query)},500)()})},t}return Object(g.a)(o,e),Object(s.a)(o,[{key:"render",value:function(){return n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:this.handleChange}))}}]),o}(A.Component),y=function(e){var o=e.search;return n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(E.a,{to:x,className:"close-search"},"Close"),n.a.createElement(p,{search:o}))},j=function(e){var o=e.coverURL;return n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(o||"data:image/jpeg;base64,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tjGaAHG+vDBbwm4k8u2YtAM/6sk549OaAHHUb4m6P2qTN2c3HP8ArOc80AJbahe20AgguZI4hKJgoPAcdG+vAoAs22vazbNK1vqM8ZmkMkm0/eY9SfegCG/1TUL9Al5dyzKG34Y/xYxn60APt9a1W3aJoL+aMwxmKMg/dQkHaPbgflQAsut6vLexXkmo3DXEOfLctymRg49M0ASSeItckkikk1O4Z4mLRknlSQRkfgTQBBqWralqSIl9ey3CocqHPQ0AUqACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/Z",'")')}})},B=function(e){function o(){var e,t;Object(l.a)(this,o);for(var A=arguments.length,n=new Array(A),a=0;a<A;a++)n[a]=arguments[a];return(t=Object(i.a)(this,(e=Object(u.a)(o)).call.apply(e,[this].concat(n)))).state={value:t.props.shelf},t.handleChange=function(e){var o=t.state.value;t.setState({value:e.target.value},function(){t.props.onMove(o,t.state.value)})},t}return Object(g.a)(o,e),Object(s.a)(o,[{key:"render",value:function(){return n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{value:this.state.value,onChange:this.handleChange},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),this.props.bookShelves.map(function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.title)}),n.a.createElement("option",{value:"none"},"None")))}}]),o}(A.Component),S=function(e){var o=e.book,t=e.bookShelves,A=e.onMove;return n.a.createElement("div",{className:"book-top"},n.a.createElement(j,{coverURL:o.imageLinks?o.imageLinks.smallThumbnail:""}),n.a.createElement(B,{bookShelves:t,shelf:o.shelf,onMove:A}))},N=function(e){function o(){var e,t;Object(l.a)(this,o);for(var A=arguments.length,n=new Array(A),a=0;a<A;a++)n[a]=arguments[a];return(t=Object(i.a)(this,(e=Object(u.a)(o)).call.apply(e,[this].concat(n)))).onMove=function(e,o){t.props.onMove(t.props.book.id,e,o)},t}return Object(g.a)(o,e),Object(s.a)(o,[{key:"render",value:function(){var e=this.props,o=e.book,t=e.bookShelves;return n.a.createElement("div",{className:"book"},n.a.createElement(S,{book:o,bookShelves:t,onMove:this.onMove}),n.a.createElement("div",{className:"book-title"},o.title),n.a.createElement("div",{className:"book-authors"},o.authors?o.authors.join(", "):"Unknown"))}}]),o}(A.Component),Q=function(e){var o=e.books,t=e.bookShelves,A=e.onMove;return n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},o.map(function(e){return n.a.createElement("li",{key:e.id},n.a.createElement(N,{book:e,bookShelves:t,onMove:A}))})))},w=function(e){function o(){var e,t;Object(l.a)(this,o);for(var A=arguments.length,n=new Array(A),a=0;a<A;a++)n[a]=arguments[a];return(t=Object(i.a)(this,(e=Object(u.a)(o)).call.apply(e,[this].concat(n)))).state={results:[]},t.search=function(e){e?f(e).then(function(e){if(e.error)t.setState({results:[]});else{var o=e.map(function(e){var o=t.props.selectedBooks.find(function(o){return o.id===e.id});return e.shelf=o?o.shelf:"none",e});t.setState({results:o})}}):t.setState({results:[]})},t}return Object(g.a)(o,e),Object(s.a)(o,[{key:"render",value:function(){return n.a.createElement("div",{className:"search-books ".concat(0===this.state.results.length?"empty-results":"")},n.a.createElement(y,{search:this.search}),n.a.createElement(Q,{books:this.state.results,bookShelves:this.props.bookShelves,onMove:this.props.onMove}))}}]),o}(A.Component),O=function(){return n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads"))},R=function(e){var o=e.title,t=e.bookShelves,A=e.books,a=e.onMove;return n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},o),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},A.map(function(e){return n.a.createElement("li",{key:e.id},n.a.createElement(N,{book:e,bookShelves:t,onMove:a}))}))))},P=function(e){var o=e.bookShelves,t=e.books,A=e.onMove,a={},r=!0,c=!1,l=void 0;try{for(var s,i=o[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var u=s.value;a[u.value]=[]}}catch(m){c=!0,l=m}finally{try{r||null==i.return||i.return()}finally{if(c)throw l}}var g=!0,h=!1,C=void 0;try{for(var v,K=t[Symbol.iterator]();!(g=(v=K.next()).done);g=!0){var b=v.value;a[b.shelf].push(b)}}catch(m){h=!0,C=m}finally{try{g||null==K.return||K.return()}finally{if(h)throw C}}return n.a.createElement("div",{className:"list-books-content"},n.a.createElement("div",null,o.map(function(e,o,t){return n.a.createElement(R,{key:e.value,title:e.title,bookShelves:t,books:a[e.value],onMove:A})})))},H=function(){return n.a.createElement("div",{className:"open-search"},n.a.createElement(E.a,{to:"".concat(x,"/search")},"Add a book"))},M=function(e){var o=e.bookShelves,t=e.books,A=e.onMove;return n.a.createElement("div",{className:"list-books ".concat(0===t.length?"empty-results":"")},n.a.createElement(O,null),n.a.createElement(P,{bookShelves:o,books:t,onMove:A}),n.a.createElement(H,null))},U=[{value:"currentlyReading",title:"Currently Reading"},{value:"wantToRead",title:"Want to Read"},{value:"read",title:"Read"}],J=function(e){function o(){var e,t;Object(l.a)(this,o);for(var A=arguments.length,n=new Array(A),a=0;a<A;a++)n[a]=arguments[a];return(t=Object(i.a)(this,(e=Object(u.a)(o)).call.apply(e,[this].concat(n)))).state={books:[]},t.onMove=function(e,o,A){m({id:e},A).then(function(){if("none"===o)b(e).then(function(e){t.setState(function(o){return{books:[].concat(Object(c.a)(o.books),[e])}})});else{var n=Object(c.a)(t.state.books);if("none"===A){var a=n.findIndex(function(o){return o.id===e});n.splice(a,1)}else{n.find(function(o){return o.id===e}).shelf=A}t.setState({books:n})}})},t}return Object(g.a)(o,e),Object(s.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(C,"/books"),{headers:K}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(o){e.setState({books:o})})}},{key:"render",value:function(){var e=this,o=this.state.books;return n.a.createElement("div",{className:"app"},n.a.createElement(k.a,{exact:!0,path:x,render:function(){return n.a.createElement(M,{bookShelves:U,books:o,onMove:e.onMove})}}),n.a.createElement(k.a,{path:"".concat(x,"/search"),render:function(){return n.a.createElement(w,{bookShelves:U,selectedBooks:o,onMove:e.onMove})}}))}}]),o}(A.Component),D=(t(26),t(29));t.d(o,"rootUrl",function(){return x});var x="/reactnd-project-myreads";r.a.render(n.a.createElement(D.a,null,n.a.createElement(J,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.4394425e.chunk.js.map